# Hackathon 

blablabla
## Mission statement
Demonstrate the efficiency of using $search instead of $regex/$text for common use cases and the computation impact on a system at scale.

## Dataset

For the purpose of this hackathon we used the dataset provided for the TREC 2019 Deep Learning Track (<https://microsoft.github.io/msmarco/TREC-Deep-Learning-2019>), derived from  MS MARCO (MAchine Reading COmprehension dataset: <https://microsoft.github.io/msmarco/>). All the data is generated by sampling queries from Bingâ€™s search logs. The track has two tasks: Document retrieval and passage retrieval and for the purpose of this hackathon we used the former.
The data is provided as a tsv file consisting 3.213.835 records with 4 columns: docid, url, title and body, for a total raw size of about 22 GB.


| Type | Filename | File size | Num Records | Format |
| ------------- | ------------- | ------------- | ------------- | ------------- | 
| Corpus | msmarco-docs.tsv | 22 GB | 3,213,835 | tsv: docid, url, title, body |

## Setup
__1. Configure Atlas Environment__
* Log-on to your [Atlas account](http://cloud.mongodb.com) (using the MongoDB SA preallocated Atlas credits system) and navigate to your SA project
* In the project's Security tab, choose to add a new user called __main_user__, for this user select __Add Default Privileges__ and in the __Default Privileges__ section add the roles __readWriteAnyDatabase__ and __clusterMonitor__ (make a note of the password you specify)
* Create an __M30__ based 3 node replica-set in a single AWS region of your choice with default storage settings (backup can be disabled). 
* In the Atlas console, for the database cluster you deployed, click the __Connect button__, select __Connect Your Application__, and for the __latest Java version__  copy the __Connection String Only__ - make a note of this MongoDB URL address to be used later

__2. Download dataset__
* Download the tsv file named msmarco-docs.tsv from: <https://microsoft.github.io/msmarco/TREC-Deep-Learning-2019>

__3. Load dataset__ 

```bash
mongoimport mongodb+srv://<user>:<password>@atlassearch-trec2019.4m8aa.mongodb.net --db TREC2019 --collection corpus  --type tsv --file msmarco-docs.tsv --fields=docid, url, title, body
```


## Execution

__1. Regex__

* For testing `$regex` we should create an index on the desired fields.


```javascript
{
	"title": 1
}
```

__2. $text__

* For testing `$text` we should create a text index on the desired fields.

```javascript
{
	"title": "text",
	"body": "text"
}
```

__3. $search__

* For testing `$text` we should create an Atlas Search index on the desired fields.

```javascript
{
  "mappings": {
    "dynamic": false,
    "fields": {
      "body": {
        "type": "string"
      },
      "title": {
        "type": "string"
      }
    }
  }
}
```






db.stores.find( { $text: { $search: "\"coffee shop\"" } } )



## Usage

```json
{"_id":{"$oid":"626805140c1aa123ecccb93c"},"docid":"D3233725","url":"http://www.akc.org/dog-breeds/dogo-argentino/care/","title":"Dogo Argentino","body":"Dogo Argentino Miscellaneous The Dogo Argentino is a pack-hunting dog, bred for the pursuit of big-game such as wild boar and puma, and possesses the strength, intelligence and quick responsiveness of a serious athlete. His short, plain and smooth coat is completely white, but a dark patch near the eye is permitted as long as it doesn't cover more than 10% of the head. Dog Breeds Dogo Argentinocompare this breed with any other breed/s of your choosing Personality: Loyal, trustworthy, and, above all else, courageous Energy Level: Somewhat Active; Dogos require vigorous exercise to stay at their physical and temperamental best Good with Children: Better with Supervision Good with other Dogs: With Supervision Shedding: Infrequent Grooming: Occasional Trainability: Responds Well Height: 24-27 inches (male), 23.5-26 inches (female)Weight: 80-100 pounds Life Expectancy: 9-15 years Barking Level: Barks When Necessarymeet the Dogo Argentino Did you know? The Dogo Argentino is also known as the Argentinian Mastiff. How similar are you? Find out!Breed History1995The Dogo Argentino was first recorded in the Foundation Stock Service. Breed Standard Learn more about the Dogo Argentino breed standard. Click Here Colors & Markings10Learn Moreat a Glance Energy & Sizemedium ENERGY & large size NATIONAL BREED CLUBThe Dogo Argentino Club Of America Find Dogo Argentino Puppiesthe Breed Standard Embed the breed standard on your site. Download the complete breed standard or club flier PDFs.01020304050607General Appearance Molossian normal type, mesomorphic and macrothalic, within the desirable proportions without gigantic dimensions. Its aspect is harmonic and vigorous due to its powerful muscles which stand out under the consistent and elastic skin adhered to the body through a not very lax subcutaneous tissue. It walks quietly but firmly, showing its intelligence and quick responsiveness and revealing by means of its movement its permanent happy natural disposition. Of a kind and loving nature, of a striking whiteness, its physical virtues turn it into a real athlete. Dogo Argentino Care Nutrition & Feeding Good nutrition for Dogo Argentinos is very important from puppyhood to their senior years. Read More Coat & Grooming The breed's coat needs only weekly brushing. Read More Exercise The Dogo Argentina is not a good choice for the novice owner. Read More Health Dogo Argentinos are generally a healthy breed. Read Moreget involved in Clubs & Events National Breed Clubthe Dogo Argentino Club of America Local Clubs Find the Local Clubs in your area. Meetups Explore meetups.com and see all of the local Dogo Argentinos in your area.breeds Similar to the Dogo Argentino Cane Corso Plott Rhodesian Ridgeback Great Dane Bullmastiffexplore Other Breeds By Dog Breed By Dog Group "}
```

## Contributing
Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.

Please make sure to update tests as appropriate.

## License
[MIT](https://choosealicense.com/licenses/mit/)